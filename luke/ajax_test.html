<html>
   <head>
      <title>AJAX</title>
      <script type='text/javascript' src='http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js'></script>
      <script type='text/javascript' src='../d3.v2.js'></script>
    <style type="text/css">

.node circle {
  cursor: pointer;
  fill: #fff;
  stroke: steelblue;
  stroke-width: 1.5px;
}

.node text {
  font: 10px sans-serif;
}

.label {
   font: 10px sans-serif;
}

path.link {
  fill: none;
  stroke: #ccc;
  stroke-width: 1.5px;
}

    </style>
   </head>
   <body>
      <div id="graph"></div>
      <script type='text/javascript'>
var width=1280, height=800;

var graph = d3.select("#graph").append("svg")
   .attr("width", width)
   .attr("height", height)
   .append("g");

var diagonal = d3.svg.diagonal().projection(function(d) { return [d.x, d.y]; });

d3.json("test.json", function(json) { 
      var nodes = json.nodes;
      function get(name) { for(var i in nodes) { if(nodes[i].name == name)  return nodes[i];  } }
      var links = json.links;
      var line = d3.svg.line()
         .x(function(d) { return d.x; })
         .y(function(d) { return d.y; })
         .interpolate("basis");

      var paths = graph.selectAll("path.link").data(links).enter();
      paths.insert("path")
         .attr("class","link")
         .attr("d",function(d) { var s = get(d.source); var t = get(d.target); return line([s,t]);});
         
      var nodeEnter = graph.selectAll("g.node").data(nodes).enter().append("g")
         .attr("class","node")
         .attr("transform", function(d) { return "translate(" + d.x + "," + d.y + ")"; });
      nodeEnter.append("circle")
         .attr("r",4.5)
         .style("fill","#fff");

});
      </script>
   </body>
</html>

